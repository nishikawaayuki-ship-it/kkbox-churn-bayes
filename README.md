# プロジェクト名（仮）

## Status
- Day2: 設計完了（次：特徴量作成→Baseline学習）
## 1. 目的（Why）
## 2. 問題設定（Business / KPI）
目的：解約（churn）リスクを事前に推定し、介入優先度を決めて解約率を下げる。
目的変数：is_churn（予測基準日t時点で生存しているユーザーが、t+Δ期間内に離脱するかの二値）。
意思決定：介入枠（例：上位k%）に施策を配分し、期待利益を最大化する。
## 3. データ（Data）
想定データ：transactions / user_logs / members（ユーザーIDで結合）
学習データ作成：基準日tを置き、t以前のみで特徴量を作り、t+Δで離脱ラベルを付与する。
## 4. 分析設計（Design）
- 基準日tを複数スライドさせて学習データを作成（リーク防止）。
- 介入枠k%を想定し、Top-k Liftと期待利益で意思決定の妥当性を評価する。
## 5. 特徴量（Features）
- 粒度：user_id単位（1ユーザー=1行）
- 集計窓：直近30日（補助で直近7日）
- transactions：支払い失敗回数、成功回数、プラン変更回数、支払金額、残契約日数など
- user_logs：総再生秒数、アクティブ日数、平均利用時間、直近利用日、利用の前年差分など
- members：登録経路、性別/年齢（欠損はunknown扱い）
## 6. モデリング（Modeling）
- Churn予測（時点t→t+Δ）：Logistic Regression をBaselineに、LightGBMで精度比較
- 潜在タイプ推定：P(type|X) を推定（まずは単純な分類器/確率モデルでOK）
## 7. 評価（Evaluation）
- 予測性能：AUC / PR-AUC
- 施策前提：Top-k Lift（介入枠k%でどれだけ濃いか）
- 確率の信頼性：Calibration（Platt/Isotonic）
### 納得性チェック（Typeの妥当性）
正解ラベル（真の原因）が無いため、各タイプについて「確率が高い上位ユーザー」を10人抽出し、
直近ログ（決済失敗/利用急落/プラン変更/周期性など）がタイプ定義と整合するかを目視で確認する。
## 8. 施策（Action）
本プロジェクトでは「真因の断定」ではなく、打ち手が変わる意思決定クラス（潜在タイプ）を推定する。

- Payment-friction：支払い摩擦（失敗・更新・残高不足など）
- Engagement-decay：利用低下（習慣切れ・熱量低下）
- Value/Price-mismatch：価値≦価格（割引/プラン最適化で戻る余地）
- Temporary pause：一時休眠（忙しさ等で一時的に離れている）
### Payment-friction
- 決済手段更新導線の改善、失敗時リトライ、サポート導線強化

### Engagement-decay
- 復帰レコメンド、リマインド通知、再生履歴起点の復帰導線

### Value/Price-mismatch
- 割引/ライトプラン提案、プラン最適化、価値訴求（音質/オフライン等）

### Temporary pause
- 休眠モード提案、通知頻度最適化、復帰タイミング最適化

## 9. 運用（Ops）
- 週次でスコアリング（バッチ）し、上位k%を施策対象として出力。
- 監視：スコア分布のドリフト、AUC/PR-AUC、キャリブレーションの劣化をチェック。
## 10. 再現手順（How to Run）
## 11. ディレクトリ構成
## 12. 今後の改善（Next）
